## SQL Pruning Utility

A simple utility written in .NET to to prune MS-SQL backup files from a given folder (or an Amazon S3 bucket).

The program lists all Microsoft SQL Server `.bak` files in a given folder and determines which one to keep (per database) in order to follow the following pruning rules:

1. One week worth of daily backups (from now)
2. One Sunday of backups for a month
3. One backup per month for a year
4. One backup per year after that

The **pruning rules apply per database**.

Example of expected file names (as automatically generated by backup plans created in MS SQL management studio):

    dbname1_backup_2014_06_20_010002_0897411.bak
    dbname2_backup_2014_06_20_010002_0957417.bak
    ...

The utility relies on the date *in the file name*, **not** the file system's creation date.

#### Usage:

    sqlprune.exe [pathToFolder] [-delete]

 * __pathToFolder__ The path to your local folder containting .bak files (e.g. "c:\sql-backups")
 * __delete__ Unless this flag is present files will not be deleted

#### Todo:

* Add local folder support: at the moment the command doesn't do anything!
* Add S3 support: add bucket name parameter to use intead of a local folder 

#### Download:

Navigate to the github releases for this project.